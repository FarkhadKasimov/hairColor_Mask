<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <title>Hair Color Demo — MediaPipe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./styles/styles.css" />
</head>
<body>
  <header>
    <h1>Hair Color Demo</h1>
    <div class="controls">
      <button id="startBtn">Старт</button>
      <button id="stopBtn">Стоп</button>
      <label class="inline">
        <span>Режим:</span>
        <select id="mode">
          <option value="solid">Сплошной цвет</option>
          <option value="ombre">Омбре (градиент)</option>
        </select>
      </label>
      <label class="inline">
        <span>Интенсивность</span>
        <input id="strength" type="range" min="0" max="1" step="0.02" value="0.65" />
      </label>
      <label class="inline">
        <span>Размытие краёв</span>
        <input id="feather" type="range" min="0" max="2" step="0.05" value="0.4" />
      </label>
      <button id="snapBtn">Снимок</button>
      <button id="saveBtn">Сохранить PNG</button>
    </div>
  </header>

  <section class="palette">
    <div id="solidPanel">
      <label class="inline">
        <span>Цвет</span>
        <input id="solidColor" type="color" value="#9b4dff" />
      </label>
      <div class="swatches" id="presets">
        <button class="sw" data-color="#C0392B" style="background:#C0392B" title="Красный"></button>
        <button class="sw" data-color="#F1C40F" style="background:#F1C40F" title="Блонд"></button>
        <button class="sw" data-color="#27AE60" style="background:#27AE60" title="Зелёный"></button>
        <button class="sw" data-color="#3498DB" style="background:#3498DB" title="Синий"></button>
        <button class="sw" data-color="#8E44AD" style="background:#8E44AD" title="Фиолетовый"></button>
        <button class="sw" data-color="#2C3E50" style="background:#2C3E50" title="Тёмный"></button>
      </div>
    </div>

    <div id="ombrePanel" class="hidden">
      <label class="inline"><span>Верх</span><input id="topColor" type="color" value="#f5d08b" /></label>
      <label class="inline"><span>Низ</span><input id="bottomColor" type="color" value="#8e44ad" /></label>
      <label class="inline"><span>Смещение</span><input id="gradientShift" type="range" min="-0.5" max="0.5" step="0.01" value="0" /></label>
    </div>

    <div class="hsl">
      <label class="inline"><span>Hue</span><input id="hue" type="range" min="-180" max="180" step="1" value="0" /></label>
      <label class="inline"><span>Sat</span><input id="sat" type="range" min="-100" max="100" step="1" value="0" /></label>
      <label class="inline"><span>Light</span><input id="light" type="range" min="-100" max="100" step="1" value="0" /></label>
      <button id="resetHSL">Сброс HSL</button>
    </div>
  </section>

  <main>
    <video id="video" autoplay playsinline muted></video>
    <div class="stage"><canvas id="canvas"></canvas><div id="status">Загрузка…</div></div>
  </main>

  <footer>
    <small>Работает по HTTPS. Модель: MediaPipe HairSegmenter (браузер).</small>
  </footer>

  <script type="module" src="./scripts/main.js"></script>
</body>
</html>